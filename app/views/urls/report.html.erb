<!DOCTYPE html>
<html>
<head>
  <title>Usage Report</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <style>
    .report-header {
      margin-bottom: 30px;
    }
    .report-table {
      margin-top: 20px;
    }
    .report-table th, .report-table td {
      text-align: center;
    }
    .details {
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="report-header text-center">
          <h2>Usage Report for <%= @url.short_url %></h2>
        </div>
        <div class="details">
          <p><strong>Original URL:</strong> <%= @url.original_url %></p>
          <p><strong>Shortened URL:</strong> <%= link_to short_url(@url.short_url), short_url(@url.short_url), target: "_blank" %></p>
        </div>
        <table class="table table-striped table-bordered report-table">
          <thead class="thead-dark">
            <tr>
              <th>Click Timestamp</th>
              <th>Geolocation</th>
            </tr>
          </thead>
          <tbody>
            <% @visits.each do |visit| %>
              <tr>
                <td><%= visit.clicked_at.strftime("%Y-%m-%d %H:%M:%S") %></td>
                <td><%= visit.geolocation %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
        <div class="text-center mt-4">
          <%= link_to 'Back to Homepage', root_path, class: 'btn btn-primary' %>
        </div>
      </div>
    </div>
  </div>
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>